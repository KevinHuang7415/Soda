<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css"
        integrity="sha512-2SwdPD6INVrV/lHTZbO2nodKhrnDdJK9/kg2XD1r9uGqPo1cUbujc+IYdlYdEErWNu69gVcYgdxlmVmzTWnetw=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Mogra&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="./css/main_setting.css">
    <link rel="stylesheet" href="./css/indexPart234.css">
</head>

<body>
    <!-- 桌機版內容 -->
    <div class="wrap">
        <div id="group">
            <div id="group1">
                <div class="box1">
                    <h2>檸檬</h2>
                    <h3>清爽酸甜</h3>
                    <p>
                        帶來沁涼暢快的口感
                    </p>
                    <div class="lomen1">
                        <img src="./images/box1/Lemon1.png">
                    </div>
                    <div class="lomen2">
                        <img src="./images/box1/Lemon2.png">
                    </div>
                    <div class="can1">
                        <img src="./images/box1/can1.png">
                    </div>
                    <div class="box1-down">
                        <div class="downBg">
                            <img src="./images/box1/Lemondown.png">
                        </div>
                        <nav class="downbtn">
                            <a href="#group3">
                                <div class="btn-s">
                                    <img src="./images/icon/4115226_arrow_arrow left_left_icon.svg" alt="">
                                </div>
                            </a>
                            <a href="#group1">
                                <div class="btn btn-l">檸檬能量飲</div>
                            </a>
                            <a href="#group2">
                                <div class="btn-s">
                                    <img src="./images/icon/4115224_arrow_arrow left_right_icon.svg" alt="">
                                </div>
                            </a>
                        </nav>
                    </div>
                </div>
                <div class="boxBody1">
                    <div class="contentBg">
                        <script src="./js/boxBody1.js"></script>
                        <img src="./images/box1/candown1.png">
                    </div>
                </div>
            </div>
            <div id="group2">
                <div class="box2">
                    <h2>葡萄</h2>
                    <h3>飽滿果香</h3>
                    <p>
                        氣泡中藏著微醺的浪漫
                    </p>
                    <div class="lomen1">
                        <img src="./images/box2/Grape1.png">
                    </div>
                    <div class="lomen2">
                        <img src="./images/box2/Grape2.png">
                    </div>
                    <div class="can1">
                        <img src="./images/box2/can2.png">
                    </div>
                    <div class="box1-down">
                        <div class="downBg">
                            <img src="./images/box2/Grapedown.png">
                        </div>
                        <nav class="downbtn">
                            <a href="#group1">
                                <div class="btn-s">
                                    <img src="./images/icon/4115226_arrow_arrow left_left_icon.svg" alt="">
                                </div>
                            </a>
                            <a href="#group2">
                                <div class="btn btn-l">葡萄能量飲</div>
                            </a>
                            <a href="#group3">
                                <div class="btn-s">
                                    <img src="./images/icon/4115224_arrow_arrow left_right_icon.svg" alt="">
                                </div>
                            </a>
                        </nav>
                    </div>
                </div>
                <div class="boxBody2">
                    <div class="contentBg">
                        <script src="./js/boxBody2.js"></script>
                        <img src="./images/box2/candown2.png">
                    </div>
                </div>
            </div>
            <div id="group3">
                <div class="box3">
                    <h2>草莓</h2>
                    <h3>粉嫩香甜</h3>
                    <p>
                        每一口都是戀愛的感覺
                    </p>
                    <div class="lomen1">
                        <img src="./images/box3/strawberry1.png">
                    </div>
                    <div class="lomen2">
                        <img src="./images/box3/strawberry2.png">
                    </div>
                    <div class="can1">
                        <img src="./images/box3/can3.png">
                    </div>
                    <div class="box1-down">
                        <div class="downBg">
                            <img src="./images/box3/strawberrydown.png">
                        </div>
                        <nav class="downbtn">
                            <a href="#group2">
                                <div class="btn-s">
                                    <img src="./images/icon/4115226_arrow_arrow left_left_icon.svg" alt="">
                                </div>
                            </a>
                            <a href="#group3">
                                <div class="btn btn-l">草莓能量飲</div>
                            </a>
                            <a href="#group1">
                                <div class="btn-s">
                                    <img src="./images/icon/4115224_arrow_arrow left_right_icon.svg" alt="">
                                </div>
                            </a>
                        </nav>
                    </div>
                </div>
                <div class="boxBody3">
                    <div class="contentBg">
                        <script src="./js/boxBody3.js"></script>
                        <img src="./images/box3/candown3.png">
                    </div>
                </div>
            </div>
        </div>
    </div>
     <!-- 手機版專用容器 -->
     <div class="orbit-container-mobile" id="orbit-container-mobile">
         <!-- 旋轉提示 -->
         <div class="rotation-hint" id="rotation-hint">
             <p>繼續旋轉可查看產品資訊</p>
         </div>
         <!-- 軌道路徑 -->
         <div class="orbit-path-mobile"></div>
        <!-- 圓形背景 -->
        <div class="circle-background-mobile">
            <!-- 卡片 1 -->
            <div class="card-orbit-mobile" data-index="0"></div>
            <div class="boxBody1-mobile">
                <div class="contentBg-mobile">
                    <div class="contentTitle-mobile">
                        <h2>檸檬</h2>
                        <h2>X</h2>
                        <h2>振宇</h2>
                    </div>
                    <div class="contentMain-mobile">
                        <p>檸檬：清爽酸甜，一口喚醒夏日活力。振宇：充滿活力的小隊長，總是帶著自信的笑容，用勇氣帶領朋友們迎接挑戰。</p>
                    </div>
                </div>
            </div>

            <!-- 卡片 2 -->
            <div class="card-orbit-mobile" data-index="1"></div>
            <div class="boxBody2-mobile">
                <div class="contentBg-mobile">
                    <div class="contentTitle-mobile">
                        <h2>葡萄</h2>
                        <h2>X</h2>
                        <h2>神秘</h2>
                    </div>
                    <div class="contentMain-mobile">
                        <p>葡萄：飽滿果香，氣泡中藏著微醺的浪漫。神秘：總是隱藏在面紗後，帶著神秘氣息，沒人能完全看透他。</p>
                    </div>
                </div>
            </div>

            <!-- 卡片 3 -->
            <div class="card-orbit-mobile" data-index="2"></div>
            <div class="boxBody3-mobile">
                <div class="contentBg-mobile">
                    <div class="contentTitle-mobile">
                        <h2>草莓</h2>
                        <h2>X</h2>
                        <h2>貝比</h2>
                    </div>
                    <div class="contentMain-mobile">
                        <p>草莓：粉嫩香甜，每一口都是戀愛的感覺。貝比：可愛又單純，總是帶來歡笑和溫暖，是大家的小太陽。</p>
                    </div>
                </div>
            </div>

        </div>
    </div>
     <div class="product">
         <div class="soda1">
            <h2>檸檬能量飲</h2>
            <div class="price">
                <p>4 X 355ml</p>
                <p>$199</p>
                <p>12 X 355ml</p>
                <p>$499</p>
            </div>
            <img id="sodaPhoto1" src="./images/product/soda1.png">
            <img id="sodaPhoto2" src="./images/product/soda1_2.png">
            <img id="sodaPhoto3" src="./images/product/soda1_3.png">
            <nav class="show">
                <a href="#">
                    <img src="./images/product/show1.png">
                </a>
                <a href="#">
                    <img src="./images/product/show2.png">
                </a>
                <a href="#">
                    <img src="./images/product/show3.png">
                </a>
            </nav>
        </div>
        <div class="soda2">
            <h2>草莓能量飲</h2>
            <div class="price">
                <p>4 X 355ml</p>
                <p>$199</p>
                <p>12 X 355ml</p>
                <p>$499</p>
            </div>
            <img id="sodaPhoto4" src="./images/product/soda2.png">
            <img id="sodaPhoto5" src="./images/product/soda2_2.png">
            <img id="sodaPhoto6" src="./images/product/soda2_3.png">
            <nav class="show">
                <a href="#">
                    <img src="./images/product/show1.png">
                </a>
                <a href="#">
                    <img src="./images/product/show2.png">
                </a>
                <a href="#">
                    <img src="./images/product/show3.png">
                </a>
            </nav>
        </div>
        <div class="soda3">
            <h2>葡萄能量飲</h2>
            <div class="price">
                <p>4 X 355ml</p>
                <p>$199</p>
                <p>12 X 355ml</p>
                <p>$499</p>
            </div>
            <img id="sodaPhoto7" src="./images/product/soda3.png">
            <img id="sodaPhoto8" src="./images/product/soda3_2.png">
            <img id="sodaPhoto9" src="./images/product/soda3_3.png">
            <nav class="show">
                <a href="#">
                    <img src="./images/product/show1.png">
                </a>
                <a href="#">
                    <img src="./images/product/show2.png">
                </a>
                <a href="#">
                    <img src="./images/product/show3.png">
                </a>
            </nav>
        </div>
    </div>


    <!-- jQuery主程式 -->
    <script src="./jquary/js/jquery-1.11.3.min.js"></script>
    <!-- 轉場主程式 -->
    <script src="./jquary/js/jquery.localScroll.min.js"></script>
    <!-- 滑動主程式-->
    <script src="./jquary/js/jquery.scrollTo.min.js"></script>
    <!--撰寫自己的jQuery -->
    <script src="./js/scroll.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== 手機版旋轉功能開始執行 ===');
            
            let rotation = 0;
            let targetRotation = 0;
            let isAnimating = false;
        
             const container = document.querySelector('#orbit-container-mobile');
             const hint = document.querySelector('#rotation-hint');
             
             console.log('找到手機版容器:', container);
            
            if (!container) {
                console.error('找不到手機版容器');
                return;
            }

            // 檢查是否為手機版尺寸
            function isMobileSize() {
                return window.innerWidth <= 640;
            }

            // 如果不在手機版尺寸，不執行任何功能
            if (!isMobileSize()) {
                console.log('非手機版尺寸，跳過手機版功能');
                return;
            }
        
             let lastRotation = 0;
             let hasScrolledToProduct = false;
             
             function updateRotation() {
                 const circleBackground = document.querySelector('#orbit-container-mobile .circle-background-mobile');
                 
                 if (circleBackground) {
                     circleBackground.style.transform = `translate(-50%, -50%) rotate(${rotation}deg)`;
                     console.log('旋轉角度:', rotation.toFixed(2));
                 }
                 
                 let normalizedRotation = ((rotation % 360) + 360) % 360;
                 
                 if (normalizedRotation >= 300 || normalizedRotation < 60) {
                     container.style.backgroundColor = '#2BAD2F';
                     hasScrolledToProduct = false; // 重置標記
                 } else if (normalizedRotation >= 60 && normalizedRotation < 180) {
                     container.style.backgroundColor = '#E33DDC';
                     hasScrolledToProduct = false; // 重置標記
                 } else if (normalizedRotation >= 180 && normalizedRotation < 300) {
                     container.style.backgroundColor = '#FE3489';
                     
                     // 當到達卡片3時顯示提示
                     if (normalizedRotation >= 180 && normalizedRotation <= 200) {
                         showHint('繼續旋轉可查看產品資訊');
                     }
                     
                     // 檢測是否旋轉超過卡片3（草莓卡片）
                     // 當角度超過 240 度時，表示已經旋轉超過卡片3
                     if (normalizedRotation > 240 && !hasScrolledToProduct) {
                         console.log('旋轉超過卡片3，滾動到 product 區域');
                         scrollToProduct();
                         hasScrolledToProduct = true;
                     }
                 }
                 
                 lastRotation = rotation;
             }
             
             // 顯示提示的函數
             function showHint(message) {
                 if (hint) {
                     hint.querySelector('p').textContent = message;
                     hint.classList.add('show');
                     setTimeout(() => {
                         hint.classList.remove('show');
                     }, 3000);
                 }
             }
             
             // 滾動到 product 區域的函數
             function scrollToProduct() {
                 const productSection = document.querySelector('.product');
                 
                 if (productSection) {
                     // 隱藏手機版容器
                     container.style.display = 'none';
                     
                     // 滾動到 product 區域
                     productSection.scrollIntoView({ 
                         behavior: 'smooth',
                         block: 'start'
                     });
                     
                     console.log('已滾動到 product 區域');
                     
                     // 3秒後重新顯示手機版容器
                     setTimeout(() => {
                         container.style.display = 'block';
                         console.log('重新顯示手機版容器');
                     }, 3000);
                 } else {
                     console.error('找不到 product 區域');
                 }
             }
        
            function animate() {
                if (Math.abs(targetRotation - rotation) > 0.1) {
                    rotation += (targetRotation - rotation) * 0.1;
                    updateRotation();
                    requestAnimationFrame(animate);
                } else {
                    rotation = targetRotation;
                    updateRotation();
                    isAnimating = false;
                }
            }
        
            updateRotation();
            console.log('✓ 手機版旋轉功能初始化完成！');

            // 監聽窗口大小變化
            window.addEventListener('resize', function() {
                if (!isMobileSize()) {
                    console.log('切換到桌機版，禁用手機版功能');
                    // 移除事件監聽器
                    container.removeEventListener('wheel', arguments.callee);
                    container.removeEventListener('touchstart', arguments.callee);
                    container.removeEventListener('touchmove', arguments.callee);
                } else {
                    console.log('切換到手機版，啟用手機版功能');
                    // 重新綁定事件監聽器
                    bindEvents();
                }
            });

            // 綁定事件的函數
            function bindEvents() {
                let scrollTimeout;
                let isScrollingToProduct = false;
                
                // 監聽滾輪事件
                container.addEventListener('wheel', (e) => {
                    // 如果正在滾動到 product 區域，允許正常滾動
                    if (isScrollingToProduct) {
                        return;
                    }
                    
                    // 檢查是否在容器中心區域（旋轉模式）
                    const rect = container.getBoundingClientRect();
                    const centerX = rect.left + rect.width / 2;
                    const centerY = rect.top + rect.height / 2;
                    const distanceFromCenter = Math.sqrt(
                        Math.pow(e.clientX - centerX, 2) + Math.pow(e.clientY - centerY, 2)
                    );
                    
                    // 如果在中心區域內，執行旋轉
                    if (distanceFromCenter < 100) {
                        e.preventDefault();
                        e.stopPropagation();
                        
                        console.log('手機版滾輪觸發！', e.deltaY);
                        
                        const delta = e.deltaY * 0.3;
                        targetRotation += delta;
                        
                        if (!isAnimating) {
                            isAnimating = true;
                            requestAnimationFrame(animate);
                        }
                        
                        // 清除滾動超時
                        clearTimeout(scrollTimeout);
                        
                        // 如果向下滾動且旋轉角度超過一定值，準備滾動到 product
                        if (e.deltaY > 0 && targetRotation > 300) {
                            scrollTimeout = setTimeout(() => {
                                console.log('準備滾動到 product 區域');
                                isScrollingToProduct = true;
                                scrollToProduct();
                                
                                // 3秒後重置狀態
                                setTimeout(() => {
                                    isScrollingToProduct = false;
                                }, 3000);
                            }, 500);
                        }
                    } else {
                        // 在邊緣區域，允許正常滾動
                        console.log('邊緣區域，允許正常滾動');
                    }
                }, { passive: false });
            
                let touchStartY = 0;
                
                // 觸控事件也只在容器上監聽
                container.addEventListener('touchstart', function (e) {
                    touchStartY = e.touches[0].clientY;
                }, { passive: true });
                
                container.addEventListener('touchmove', function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    
                    const touchEndY = e.touches[0].clientY;
                    const deltaY = touchStartY - touchEndY;
                    targetRotation += deltaY * 0.5;
                    
                    if (!isAnimating) {
                        isAnimating = true;
                        requestAnimationFrame(animate);
                    }
                    touchStartY = touchEndY;
                }, { passive: false });
            }

            // 初始綁定事件
            bindEvents();
        });
        </script>

</body>

</html>